<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>Evennia Devblog</title>
        <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico">
        <link rel="stylesheet" href="../stylesheets/styles.css">
        <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
        <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
        <link href='https://fonts.googleapis.com/css?family=Arvo' rel='stylesheet'>
        <script src="../javascripts/scale.fix.js">
        </script>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="description" content="
        Latest Evennia dev blog:  The blog moved!: If you are reading this, you may notice that this blog has moved from its old home over on blogspot. I had no issues with blogspot except for the fact that writing the blog itself was done in a rather clunky editor with limited support for code. ...
        ---
        Evennia is a modern Python library and server for creating text-based
        multi-player games and virtual worlds (also known as MUD, MUSH, MU,
        MUX, MUCK, etc). While Evennia handles all the necessary things every
        online game needs, like database and networking, you create the game of
        your dreams by writing normal Python modules."> <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js">
            </script>
        <![endif]-->
    </head>
    <body>
        <div class="wrapper">
            <header>
                <p>
                <img class="logo" src="../images/evennia_logo.png" alt="Evennia logo">
                </p>
                <h1 class="header">Evennia</h1>
                <p class="header header-text">The Python MU* Development Library</p>
                <div class="linksection">
                    <ul>
                        <div class="buttonsection">
                            <li>
                                <a class="buttons" href="../index.html">Back to Evennia</a>
                            </li>
                            <li>
                                <a class="buttons devblog-calendar-tooltip"
                                    href="https://github.com/evennia/evennia/discussions">Discuss (GitHub)</a>
                            </li>
                        </div>
                    </ul>
                </div>
                <div class="devblog-calendar">
                    <ul>
                        
                            <li>
                                <a href="2021.html"> 2021 (3)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2021.html#2021-11-18-the-blog-moved!">Nov 18
                                                        <span class="devblog-calendar-tooltip-text"> The blog moved!</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2021.html#2021-03-21-where-do-i-begin?">Mar 21
                                                        <span class="devblog-calendar-tooltip-text"> Where do I begin?</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2021.html#2021-01-01-happy-new-years-2021!">Jan  1
                                                        <span class="devblog-calendar-tooltip-text"> Happy New Years 2021!</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2020.html"> 2020 (3)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2020.html#2020-11-14-evennia-0.9.5-released">Nov 14
                                                        <span class="devblog-calendar-tooltip-text">Evennia 0.9.5 released</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2020.html#2020-10-20-on-using-markdown-with-sphinx">Oct 20
                                                        <span class="devblog-calendar-tooltip-text">On using Markdown with Sphinx</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2020.html#2020-04-14-spring-updates-while-trying-to-stay-healthy">Apr 14
                                                        <span class="devblog-calendar-tooltip-text">Spring updates while trying to stay healthy</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2019.html"> 2019 (7)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-09-30-blackifying-and-fixing-bugs">Sep 30
                                                        <span class="devblog-calendar-tooltip-text">Blackifying and fixing bugs</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-07-04-evennia-0.9-released">Jul  4
                                                        <span class="devblog-calendar-tooltip-text">Evennia 0.9 released</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-05-26-creating-evscaperoom-part-2">May 26
                                                        <span class="devblog-calendar-tooltip-text">Creating Evscaperoom Part 2</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-05-18-creating-evscaperoom-part-1">May 18
                                                        <span class="devblog-calendar-tooltip-text">Creating Evscaperoom Part 1</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-05-09-podcast-about-evennia">May  9
                                                        <span class="devblog-calendar-tooltip-text">Podcast about Evennia</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-04-25-steaming-on-eating-jam">Apr 25
                                                        <span class="devblog-calendar-tooltip-text">Steaming on Eating Jam</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2019.html#2019-01-02-into-2019">Jan  2
                                                        <span class="devblog-calendar-tooltip-text">Into 2019</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2018.html"> 2018 (4)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2018.html#2018-09-30-evennia-0.8-released">Sep 30
                                                        <span class="devblog-calendar-tooltip-text">Evennia 0.8 released</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2018.html#2018-08-18-inline-building-in-upcoming-evennia-0.8">Aug 18
                                                        <span class="devblog-calendar-tooltip-text">Inline building in upcoming Evennia 0.8</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2018.html#2018-01-27-kicking-into-gear-from-a-distance">Jan 27
                                                        <span class="devblog-calendar-tooltip-text">Kicking into gear from a distance</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2018.html#2018-01-05-new-year,-new-stuff">Jan  5
                                                        <span class="devblog-calendar-tooltip-text"> New year, new stuff</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2017.html"> 2017 (6)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-10-29-getting-a-mud-rp-scene-going">Oct 29
                                                        <span class="devblog-calendar-tooltip-text">Getting a MUD RP scene going</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-10-01-evennia-in-hacktobergest-2017">Oct  1
                                                        <span class="devblog-calendar-tooltip-text">Evennia in Hacktobergest 2017</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-09-20-evennia-0.7-released">Sep 20
                                                        <span class="devblog-calendar-tooltip-text">Evennia 0.7 released</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-08-25-renaming-django's-auth-user-and-app">Aug 25
                                                        <span class="devblog-calendar-tooltip-text"> Renaming Django's Auth User and App</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-04-23-the-luxury-of-a-creative-community">Apr 23
                                                        <span class="devblog-calendar-tooltip-text">The luxury of a creative community</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2017.html#2017-02-05-news-items-from-the-new-year">Feb  5
                                                        <span class="devblog-calendar-tooltip-text">News items from the new year</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2016.html"> 2016 (7)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-11-30-birthday-retrospective">Nov 30
                                                        <span class="devblog-calendar-tooltip-text">Birthday retrospective</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-10-13-season-of-fixes">Oct 13
                                                        <span class="devblog-calendar-tooltip-text">Season of fixes</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-07-01-the-art-of-sharing-nicks-and-descriptions">Jul  1
                                                        <span class="devblog-calendar-tooltip-text">The art of sharing nicks and descriptions</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-05-31-evennia-in-pictures">May 31
                                                        <span class="devblog-calendar-tooltip-text">Evennia in Pictures</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-05-22-evennia-0.6!">May 22
                                                        <span class="devblog-calendar-tooltip-text"> Evennia 0.6!</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-03-24-technical-stuff-happening">Mar 24
                                                        <span class="devblog-calendar-tooltip-text">Technical stuff happening</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2016.html#2016-02-14-climbing-up-branches">Feb 14
                                                        <span class="devblog-calendar-tooltip-text">Climbing up Branches</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2015.html"> 2015 (13)
                                    
                                        <ul class="devblog-calendar-open">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-12-17-a-summary-of-a-year">Dec 17
                                                        <span class="devblog-calendar-tooltip-text">A summary of a year</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-11-12-mit-uses-evennia!">Nov 12
                                                        <span class="devblog-calendar-tooltip-text"> MIT uses Evennia!</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-10-11-illustrations-and-soaps">Oct 11
                                                        <span class="devblog-calendar-tooltip-text">Illustrations and soaps</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-10-02-emoting-system">Oct  2
                                                        <span class="devblog-calendar-tooltip-text">Emoting System</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-09-29-evennia-on-`podcast.__init__`">Sep 29
                                                        <span class="devblog-calendar-tooltip-text"> Evennia on `podcast.__init__`</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-09-24-pushing-through-a-straw">Sep 24
                                                        <span class="devblog-calendar-tooltip-text">Pushing through a straw</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-08-27-a-wagon-load-of-post-summer-updates">Aug 27
                                                        <span class="devblog-calendar-tooltip-text">A wagon load of post summer updates</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-06-22-announcing-the-evennia-example-game-project-"ainneve"">Jun 22
                                                        <span class="devblog-calendar-tooltip-text"> Announcing the Evennia example-game project "Ainneve"</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-06-15-need-your-help!">Jun 15
                                                        <span class="devblog-calendar-tooltip-text"> Need your help!</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-05-30-dreaming-big?">May 30
                                                        <span class="devblog-calendar-tooltip-text"> Dreaming big?</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-05-11-things-goin-on">May 11
                                                        <span class="devblog-calendar-tooltip-text">Things goin on</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-05-09-documenting-python-without-sphinx">May  9
                                                        <span class="devblog-calendar-tooltip-text">Documenting Python without Sphinx</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2015.html#2015-01-19-building-django-proxies-and-mud-libraries">Jan 19
                                                        <span class="devblog-calendar-tooltip-text">Building Django proxies and MUD libraries</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2014.html"> 2014 (7)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-10-02-slowly-moving-through-town">Oct  2
                                                        <span class="devblog-calendar-tooltip-text">Slowly moving through town</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-08-04-dance-my-puppets">Aug  4
                                                        <span class="devblog-calendar-tooltip-text">Dance my puppets</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-06-30-webby-stuff">Jun 30
                                                        <span class="devblog-calendar-tooltip-text">Webby stuff</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-06-15-bringing-back-python-memory">Jun 15
                                                        <span class="devblog-calendar-tooltip-text">Bringing back Python memory</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-05-16-imaginary-realities-volume-6,-issue-1">May 16
                                                        <span class="devblog-calendar-tooltip-text"> Imaginary Realities volume 6, issue 1</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-02-08-moving-from-google-code-to-github">Feb  8
                                                        <span class="devblog-calendar-tooltip-text">Moving from Google Code to Github</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2014.html#2014-01-24-looking-forwards-and-backwards">Jan 24
                                                        <span class="devblog-calendar-tooltip-text">Looking forwards and backwards</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2013.html"> 2013 (5)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2013.html#2013-12-16-imaginary-realities-is-back">Dec 16
                                                        <span class="devblog-calendar-tooltip-text">Imaginary Realities is back</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2013.html#2013-11-28-out-of-band-mergings">Nov 28
                                                        <span class="devblog-calendar-tooltip-text">Out of band mergings</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2013.html#2013-10-22-a-list-of-evennia-topics">Oct 22
                                                        <span class="devblog-calendar-tooltip-text">A list of Evennia topics</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2013.html#2013-05-13-one-to-many">May 13
                                                        <span class="devblog-calendar-tooltip-text">One to Many</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2013.html#2013-01-29-churning-behind-the-scenes">Jan 29
                                                        <span class="devblog-calendar-tooltip-text">Churning behind the scenes</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                            <li>
                                <a href="2012.html"> 2012 (13)
                                    
                                        <ul class="devblog-calendar-closed">
                                    
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-10-28-evennia-changes-to-bsd-license">Oct 28
                                                        <span class="devblog-calendar-tooltip-text">Evennia changes to BSD license</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-10-05-community-interest">Oct  5
                                                        <span class="devblog-calendar-tooltip-text">Community interest</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-08-31-combining-twisted-and-django">Aug 31
                                                        <span class="devblog-calendar-tooltip-text">Combining Twisted and Django</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-08-16-taking-command">Aug 16
                                                        <span class="devblog-calendar-tooltip-text">Taking command</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-06-26-extending-time-and-details">Jun 26
                                                        <span class="devblog-calendar-tooltip-text">Extending time and details</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-06-11-coding-from-the-inside">Jun 11
                                                        <span class="devblog-calendar-tooltip-text">Coding from the inside</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-05-30-dummies-doing-(even-more)-dummy-things">May 30
                                                        <span class="devblog-calendar-tooltip-text"> Dummies doing (even more) dummy things</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-03-26-shortcuts-to-goodness">Mar 26
                                                        <span class="devblog-calendar-tooltip-text">Shortcuts to goodness</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-02-22-dummies-doing-dummy-things">Feb 22
                                                        <span class="devblog-calendar-tooltip-text">Dummies doing dummy things</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-02-17-commands-and-you">Feb 17
                                                        <span class="devblog-calendar-tooltip-text">Commands and you</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-02-15-such-a-small-thing-...">Feb 15
                                                        <span class="devblog-calendar-tooltip-text"> Such a small thing ...</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-02-05-evennia's-open-bottlenecks">Feb  5
                                                        <span class="devblog-calendar-tooltip-text"> Evennia's open bottlenecks</span>
                                                   </a>
                                                </li>
                                        
                                                <li class="devblog-calendar-post devblog-calendar-tooltip">
                                                    <a href="2012.html#2012-02-05-about-this-dev-blog">Feb  5
                                                        <span class="devblog-calendar-tooltip-text">About this dev blog</span>
                                                   </a>
                                                </li>
                                        
                                        </ul>
                                </a>
                            </li>
                        
                    </ul>
                </div>
            </header>
            <section>
                <div class="devblog-rss">
                    <a href="feed.rss">
                        <img src="images/rss-icon.png" alt="RSS feed">
                    </a>
                </div>
                <h1>
                    <a name="evennia-mudmu-creation-system" class="anchor"  href="#evennia-mudmu-creation-system">
                        <span class="octicon octicon-link">
                        </span>
                    </a>Evennia Dev Blog<div class="sponsor">
                        <div class="sponsor-column">
                            <a href="https://www.patreon.com/griatch">
                                <img class="patreon" src="../images/evennia_patreon_100x100.png" alt="Patreon">
                            </a>
                            <p>
                            <a href="https://www.paypal.me/GriatchEvennia">
                                <img class="paypal" src="../images/btn_donateCC_LG.gif" alt="Paypal donate">
                            </a>
                        </div>
                </h1>

                <em>Various Evennia- and MUD-related musings by Griatch, the Evennia lead developer.</em>

                
                    
                    <div class="blog_post">
                    <h1 id=2015-12-17-a-summary-of-a-year>
    A summary of a year
    <a class="devblog-headerlink" href="2015.html#2015-12-17-a-summary-of-a-year" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- December 17, 2015</div>
</h1>
<h3><a href="https://evennia.blogspot.com/2015/12/a-summary-of-year.html">A summary of a year</a></h3>
<p><a href="https://4.bp.blogspot.com/-_8Yxtk6y1KQ/VnLiQf1U18I/AAAAAAAAEew/7zabQTvUEdY/s1600/33-1196545384.jpg"><img src="https://4.bp.blogspot.com/-_8Yxtk6y1KQ/VnLiQf1U18I/AAAAAAAAEew/7zabQTvUEdY/s200/33-1196545384.jpg" alt="" /></a></p>
<p>As 2015 is slowly drawing to an end, I looked back through Evennia's repository to see just what was going on this year. And it turns out it was a lot! I honestly didn't remember some things happened as recently as they did.</p>
<p><em>Note: For those reading this not familiar with Evennia, it's a Python library for creating MUDs (text-based multiplayer games).</em></p>
<h2>Making Evennia into a library</h2>
<p>In February of 2015 we merged what was likely the biggest change happening for a good while in Evennia - the complete refactoring of the Evennia repository into a library. It used to be that when you cloned the Evennia repo, it would come with a pre-made game/ folder where you were supposed to put your custom files. Mixing the stuff you downloaded from us with your own files (which you might want to keep under version control of your own) was not a very clean solution.</p>
<p>In the big &quot;library update&quot;, we instead created a stand-alone evennia program which you use to create your own &quot;game dir&quot; with pre-created templates. Not only does this allow you to treat the cloned evennia repo as a proper library, you can also use the same evennia install for multiple games and makes it a lot clearer just what comes from us and what is your custom code.</p>
<p>Below is a fun Gource representation (courtesy of Youtuber Landon Wilkins) of how the Evennia repository structure has changed over the years. You can see the latest library-change a little after the <a href="https://youtu.be/sXCm78XEJ9c?t=3m20s">3minute, 20 second mark</a>.</p>
<h2>Typeclasses into proxies</h2>
<p>At the same time as the library change, I also completely overhauled the way typeclasses are represented in Evennia: Typeclasses are Python classes that links back to a database model under the hood. They used to use a custom overloading of varioust get/set methods, now they instead utilize <a href="https://docs.djangoproject.com/en/1.9/topics/db/models/#proxy-models">django proxy models</a> extended to support multiple inheritance. T</p>
<p>his radically increased performance and made the code considerably cleaner, as well as completely hid the core django model from the end user (no longer a need to track if you were dealing with a model or its typeclass - you only ever run into typeclasses). This, together with the library-model led to some changes in people's source codes.</p>
<p>Even so, this change led to a lot less problems and edge-cases than I had anticipated: it seems more people had issues with upgrading django than with adopting their codes to the new typeclass changes ...</p>
<h2>Evennia Autodocs</h2>
<p>Following the big library merger I sat down to write a more comprehensive autodoc utility. We had been distributing a Doxygen config file with the repo for a long time, but I wanted something that integrated with our github wiki, using markdown in the source (because frankly, while Sphinx produces very pretty output, ReST markup looks really ugly in source code, in my opinion).</p>
<p>The result was the api2md program, which is now a part of our wiki repository. It allows our source code to be decorated in &quot;Google style&quot;, very readable output:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">funcname</span>(a, b, c, d<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">False</span>):  <span style="color: #BA2121">&quot;&quot;&quot;  </span>

<span style="color: #BA2121">    This is a brief introduction to the</span>

<span style="color: #BA2121">    function/class/method  </span>

<span style="color: #BA2121">  </span>

<span style="color: #BA2121">    Args:  </span>

<span style="color: #BA2121">        a (str): This is a string argument that</span>

<span style="color: #BA2121">          we can talk about over multiple lines.  </span>

<span style="color: #BA2121">        b (int or str): Another argument  </span>

<span style="color: #BA2121">        c (list): A list argument  </span>

<span style="color: #BA2121">        d (bool, optional): An optional keyword argument  </span>

<span style="color: #BA2121">  </span>

<span style="color: #BA2121">    Returns:  </span>

<span style="color: #BA2121">        str: The result of the function  </span>

<span style="color: #BA2121">  </span>

<span style="color: #BA2121">    Notes:  </span>

<span style="color: #BA2121">        This is an example function. If `d=True`, something </span>

<span style="color: #BA2121">        amazing will happen.  </span>

<span style="color: #BA2121">  </span>

<span style="color: #BA2121">    &quot;&quot;&quot;</span>
</pre></div>

<p>This will be parsed and converted to a Markdown entry and put into the Github wiki, one page per module. The result is the automatically generated <a href="https://github.com/evennia/evennia/wiki/evennia">Evennia API autodocs</a>, reachable as any other wiki page.</p>
<p>The convertion/prettification of all core functions of Evennia to actually <em>use</em> the Google-style docstrings took almost all year, finishing late in autumn. But now almost all of Evennia uses this style. Coincidentally this also secures us at a 45% comment/code ratio. This places us in the top 10% of well-documented open-source projects according to <a href="https://www.openhub.net/p/evennia/factoids#FactoidCommentsVeryHigh">openhub</a> (gotta love statistics).</p>
<h2>Imaginary realities / Optional Realities</h2>
<p>Spring of 2015 saw some more articles for the <a href="http://journal.imaginary-realities.com/">Imaginary Realities</a> e-zine as well as some for the newly-opened <a href="http://optionalrealities.com/">Optional Realities</a> web forum (unrelated, despite the similar name). The latter was made by a team working on a commercial Evennia-based sci-fi game, but the forums were open for other games (of any engine) and general discussion on mud and mud design.</p>
<p>Optional Realities published an impressive range of articles (one every week for several months) and organized several very interesting mud-related contests. It did, I think, a lot for bringing some new life to the mud-development scene.  Unfortunately Optional Realities suffered a complete database loss towards the end of the year, forcing it to sort of reboot from scratch. I hope it will rebound and that the articles can be put back online again!</p>
<h2>Ainneve</h2>
<p>Over summer I put out a general roll call for developers willing to lead the development of a small but fully functioning Evennia demo game - a project separate from the main Evennia development. The idea is to have something working for people to rip out and start from. The response to my request was very good and we relatively quickly ended up with two devs willing to lead and direct the effort.</p>
<p>The work-in-progress demo game they started is called <em><a href="https://github.com/evennia/ainneve">Ainneve</a></em>. It uses the base <a href="http://geekguild.com/openadventure/">Open Adventure</a> RPG rules and is distributed using the same liberal licence as Evennia.</p>
<p>Ainneve has been sputtering along throughout autumn and winter, and while progress has been a bit ... sporadic, it seems to attract new volunteers to help out. As more of the base systems gets finalized there is going to be even more &quot;low hanging fruit&quot; for people to jump in and help with.</p>
<h2>EvMenu, EvMore and EvEditor, RPSystem</h2>
<p>In July I merged some new systems into Evennia's utilities library. <em>EvMenu</em> is a class that builds an in-game menu. It uses multiple-choice questions for the user to navigate its nodes. I had a &quot;menusystem&quot; in our contrib/ folder since many years, but it was showing its age and when I found I myself didn't really understand how it was working I found it time to make something more flexible.</p>
<p>The <em>EvMore</em> is a page-scroller that allows the server to pause long texts and wait for the user to press a key before continuing. It's functionality is similar to the unix <em>more</em> program.</p>
<p>For its part, <em>EvEditor</em> has existed for a while as well, but it was moved from the contrib folder into the main utilility library as it turned out to be an important and common resource (it's basically a mud-version of the classic <em>vi</em> editor).</p>
<p>Finally, some months later, in September, I added the <em>rpsystem</em> and <em>rplanguage</em> contribution modules. The former is an author-stance recognition system similar to what is seen in some rp-heavy muds (where you don't know/see people's name off the bat, but only their description, until you manually assign a name to them).</p>
<p>The <em>rplanguage</em> module is used for handling foreign (fantasy) languages by obfuscating words heard by different parties depending on their relative language skills.</p>
<h2>Python 3 ... some day</h2>
<p>As we know, Evennia uses Python 2. In autumn of 2015 first one and then two of our users took upon themselves to help make Evennia a little more ready for running also under Python 3. After a lot of work, Evennia's core is now using code syntax that is compatible with both Python 2 and 3.</p>
<p>We <em>don't</em> run under Python 3 at this point though. This is not something under our control, but is due to Twisted not supporting Python 3 yet. But when it becomes possible, we are now better prepared for transitioning to a point where we can (hopefully) support both main Python versions.</p>
<h2>EvCast</h2>
<p>In September, user whitenoise started his &quot;EvCast&quot; video tutorial series on Evennia. There are so far two episodes, one on installing Evennia and the second on general Python concepts you need to use Evennia efficiently:</p>
<iframe width="320" height="266" src="https://www.youtube.com/embed/tjiS2Bx5xb0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2><code>Python.__init__</code> Podcast</h2>
<p>In the end of September I was interviewed by the hosts of the <em>python.<strong>init</strong></em> podcast. Turned into more than an hour of discussion about Evennia. T'was fun! You can <a href="https://plus.google.com/+Podcastinit-the-python-podcast/posts/Vu9dPVjsR9h">listen to it here</a>.</p>
<h2>Nested inlinefuncs</h2>
<p>Towards the end of the year I got (via Optional Realities) lured to participate in another text-gaming related website, <a href="http://musoapbox.net/">musoapbox</a>. This is a forum primarily populated by players from the MUSH-side of text-gaming. After some back and forth they made a strong case for increasing the functionality of Evennia's <em>inlinefunctions</em>.</p>
<p>An inlinefunction is, in Evennia, a function call embedded in a string sent to the server. This is parsed and executed (no, there is no dangerous eval happening, the call is parsed as text and then called as a normal function call). It allows for text to be dynamically replaced at run-time. What the MUSHers suggested was to also allow those inlinefunc's to be nestable - that is, to implement a call stack. The nestable form of inlinefuncs was merged with Evennia master at the end of November.</p>
<h2>Patreon</h2>
<p>This actually happened already back in February: after some requests for more ways to support Evennia development, I opened <a href="https://www.patreon.com/griatch?ty=h">a Patreon page</a>. And here at the end of the year, a whole ten patrons have signed up for it. Very encouraging!</p>
<h2>Next year</h2>
<p>In 2016 the first upcoming thing that comes to mind is push out the changes to the webclient infrastructure. That has been a long time coming since I've been unsure of how to proceed on it for quite some time. The goal is to make the webclient a lot more &quot;pluggable&quot; and modular than it is, and to clean up its API and way of communicating with the server. Overall I think the web-side of things need some love.</p>
<p>I'll likely put together some more general-use contribs as well, I have some possibles in mind.</p>
<p>We'll continue squashing bugs and work down our roadmap.</p>
<p>I'll also try to get an Evennia Wikipedia.org page together, if you want to look at how it's progressing and help editing it, see the Evennia mailing list for the link.</p>
<p>... And a lot more I don't know yet, no doubt! On towards a new year!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-12-17-a-summary-of-a-year" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-11-12-mit-uses-evennia!>
     MIT uses Evennia!
    <a class="devblog-headerlink" href="2015.html#2015-11-12-mit-uses-evennia!" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- November 12, 2015</div>
</h1>
<p><a href="https://2.bp.blogspot.com/-FPg1PS8At3k/VkR7vqSz1LI/AAAAAAAAEco/bKSpvhDxLp0/s1600/MIT-Language-Games_0.jpg"><img src="https://2.bp.blogspot.com/-FPg1PS8At3k/VkR7vqSz1LI/AAAAAAAAEco/bKSpvhDxLp0/s320/MIT-Language-Games_0.jpg" alt="" /></a></p>
<p><a href="https://www.blogger.com/"></a>Evennia was recently used as a test bed to train an AI system to attempt to play a MUD as a human would - by only reading and understanding the text on the screen.</p>
<p>Researchers at MIT (Massachusetts Institute of Technology) recently presented the paper <em>Language understanding for Text-based games using Deep reinforcement learning</em> <a href="https://arxiv.org/pdf/1506.08941.pdf">(PDF)</a> at a conference on natural language processing. A summary is in the <a href="http://news.mit.edu/2015/learning-language-playing-computer-games-0924#_msocom_1">MIT press release</a>.</p>
<p>I was contacted by these fine folks some time ago so I knew they had plans to use Evennia for their research. It's great to see they now have an article out on it! Evennia devs are also mentioned in the acknowledgements - so something for the Evennia dev community to be proud of!</p>
<h3>MUDs are tricky</h3>
<p>The main complication for an AI playing a MUD is that the computer has no access to the actual game state but must try to surmise how well it's doing only from the text given (same as a human would). The researchers compare the results from a range of deep-learning neural network algorithm that they train to play.</p>
<p>To test their AI, the researchers first used Evennia to build a simple training &quot;Home World&quot;: a 4-room &quot;house&quot; where the simple goal is to find and eat an apple while refraining to go to sleep. The room descriptions used here were pretty formulaic although not trivial to give a challenge. This they used to train their AI system.</p>
<p>They then took this trained neural network and applied it to the real challenge, playing the Evennia <a href="https://github.com/evennia/evennia/wiki/Tutorial%20World%20Introduction">Tutorial World</a>. You can yourself try this out in our demo install or by just running a single command when starting Evennia. They call it &quot;Fantasy World&quot; in the article.</p>
<p>The tutorial world has hand-written descriptions and often describes the exits as part of the room text. The article actually makes a comprehensive analysis of the tutorial world, including the available game states and transitions as well as the number of words and number of commands per state. Interesting stuff in itself. I presume the scientists have modified their copy of the tutorial world to provide better metrics for their analysis.</p>
<h3>A bridge too far</h3>
<p>As far as I understand from the article, the AI does understand to use commands with one or two arguments (like <em>eat apple</em> or the <em>move red-root right</em>), but they note that actually finding the tomb of the fallen hero (the main quest of the tutorial) is too hard for the AI:</p>
<blockquote>
<p>[...]However, this is a complex quest that requires the player to memorize game events and perform high-level planning which are beyond the scope of this current work.</p>
</blockquote>
<p>So instead they evaluate the AI's performance on a more mundane task: Getting across the bridge to the castle. It's not clear to me if the AI actually plays more of the game too or if their test just exposes the AI to the bridge itself. I suspect it <em>does</em> play more due to the examples they use from other rooms; evaluating the bridge-crossing is just a clear-cut metric to use for &quot;success&quot;.</p>
<p>The MIT press release claims that the AI is also scored on how much health/magic it has, but I don't see that mentioned in the article itself (and the tutorial world only has magic if you find the hero's tomb which they claim they cannot do).</p>
<p>The bridge in Evennia's tutorial world is actually a single &quot;room&quot; that takes multiple steps to cross. At every step the room description changes to describe the progress. Random texts will appear as the bridge sways in the wind and various environmental cues are heard and seen. There is also a small chance of falling off the bridge if one lingers too long on it.</p>
<p>So although all you really need to do is to walk east repeatedly, I can see why this can be a challenge to a neural network having no mental image of what a bridge is. It can only work off the text it's given at any given time.</p>
<p>In the paper, the algorithms are evaluated both on their ability to actually cross the bridge and on how optimal their solution was, for example by not issuing invalid commands to the situation.</p>
<h3>Beyond the bridge</h3>
<p>The results are that after being trained on the training house setup, the AI <em>will</em> eventually be able to cross the bridge. The particular algorithm proposed also perform slightly better than the comparison ones (and <em>a lot</em> better than simple randomness).</p>
<p>So from the perspective of the researchers this seems to be a success. Even so, this reinforces the fact that quite some way to go before an AI can <em>actually</em> play a real MUD successfully. Using MUDs for this type of research is a good idea though, and I do hope they expand and continue this line work in the future.</p>
<p>Who knows, maybe the AI will even find that ancient tomb eventually!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p>Image: MIT news</p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-11-12-mit-uses-evennia!" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-10-11-illustrations-and-soaps>
    Illustrations and soaps
    <a class="devblog-headerlink" href="2015.html#2015-10-11-illustrations-and-soaps" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- October 11, 2015</div>
</h1>
<p><a href="http://optionalrealities.com/wp-content/uploads/2015/10/Evennia_illustrated_fig2.png"><img src="https://lh6.googleusercontent.com/proxy/akVd5ALnso-4giJqE1OAHXgxuIZeAx2IYQC-o_zAarsIu1ge2XQkPSQO_nKFz_dX6P5EreO39-HileXV7UmobyAsfE-MlDBUy2J5c1dx4vb5hUjgR6WXzAvOcmrZ20NXVGR2ivvcqKA=s0-d" alt="" /></a></p>
<p>I recently made an article presenting the infrastructure and main coding features of Evennia using a series of nifty diagrams.</p>
<p>It can hopefully help newcomers get a feeling for the grand structure of an Evennia server/game a little easier. It's published as a feature on <a href="http://optionalrealities.com/">Optional Realities</a> and you can find the article here: <a href="http://optionalrealities.com/evennia-illustrated/">Evennia Illustrated</a>.</p>
<p>I also recently joined <a href="http://musoapbox.net/topic/620/evennia-a-python-based-mu-server">MU Soapbox</a>, a forum predominantly discussing MUSH games, to answer some technical questions on Evennia. Unsurprisingly, some (although so far surprisingly few) MUSHers express concern about Evennia's explicit lack of softcode (that is, the ability for players to use a safe in-game language to code their game rather than to use external Python modules). Their argument is sound:  They are used to in-game coding as a way to easily express creatitivy and easily garner help from players.</p>
<p>Evennia's stance here clash a bit with those opinions: Our philosophy is that our command system is powerful enough to offer players any complexity of build commands they want. The design/coding of the game itself should be done using proper coding IDEs and modern version control tools.</p>
<p>There is no denying that compared to a softcode-coded game, a player-level contributor to an Evennia game needs some extra tools to create and contribute code over version control. The admin also needs to check such contributions for malicious code before merging it into their running game. Now, these are differences I actually consider <em>advantages</em> from a code-quality perspective. And for finding help, people on average are more likely to know Python than a custom softcode language. But here opinions differ and in a given game community those language adoption numbers can be severely skewed.</p>
<p>So far, the MUSHers that have adopted Evennia seems to have done so very much to <em>get away</em> from softcode. It will be interesting to see if things like Kelketek's in-development <a href="https://github.com/evennia/evennia/pull/711">Group building Evennia contrib</a> will be stirring some interest from those on the fence, or if coding their entire game in softcode is indeed an irreplaceable source of their gaming fun.</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-10-11-illustrations-and-soaps" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-10-02-emoting-system>
    Emoting System
    <a class="devblog-headerlink" href="2015.html#2015-10-02-emoting-system" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- October  2, 2015</div>
</h1>
<p>title: Emoting Systems, or how to chat up a girl</p>
<p>copyrights: Image: ©Griatch <a href="https://deviantart.com/griatch-art">deviantart</a></p>
<p><a href="http://pre03.deviantart.net/54d0/th/pre/i/2012/114/c/8/what__s_yer_name__by_griatch_art-d4xfokb.jpg"><img src="https://lh6.googleusercontent.com/proxy/l_2MjemzGRtxOqicx4EXXRT63jmryGr7Ml_wvtSSDGg8Rc-oVzKL-_Jxy9f4gvkzROS3eE8jR3R9I2iguw0Cki4oc4reqwi607HGigS6iSO8BxHuZ53k70NUI0ZfWTpXoCqBm-Wr0LakUjfQQxIJIehaRGbvrvU=s0-d" alt="" /></a></p>
<p>A few days ago I pushed an emoting contribution to Evennia. A &quot;contrib&quot; is an optional plugin system that is not part of core Evennia but is meant to be easily picked up and used in people's own designs.</p>
<p>If you are not familiar with what an emoting system does, it is a way to decribe the actions of a character in the game. The simplest form of emote is a single command (like the command <strong>dance</strong> leading to some canned response, or in the case of a graphical game, a dance animation). This contribution offers a more sophisticated system though, allowing input like the following:</p>
<p>emote /me smiles at /cheerful as he sits at her table. &quot;Hello!&quot; he says.</p>
<p>Now, this includes /keywords that relate to the objects in the room. So assuming there is <strong><em>a very cheerful girl</em></strong> in the room, this string will come out as</p>
<p>Griatch smiles at <em><strong>a very cheerful girl</strong></em> as he sits at her table. <strong>&quot;Hello!&quot;</strong> he says.</p>
<p>But she will actually see only my outward appearance (the short description) since she doesn't know me. So the cheerful girl (let's say her name is Sandra) would for example see</p>
<p><em><strong>A man in flowing robes</strong></em> smiles at <em><strong>Sandra</strong></em> as he sits at her table. <strong>&quot;Hello!&quot;</strong> he says.</p>
<p>The emoting system has the following features:</p>
<ul>
<li>
<p>Short description replacement in emotes and in searches, as seen above. This means that you can do <strong>look cute</strong> and the system will know what you want to look at (in vanilla Evennia you'd need to use <strong>look Sandra</strong>).</p>
</li>
<li>
<p>Multi-word searching and disambiguation. If there is <strong>a cute girl</strong> and <strong>a cute puppy</strong> both in the same room, your referencing of /cute will  give an error listing the alternatives. You can then either include more words to make your reference unique or use an index (1-cute, 2-cute) to make it clear who you mean. This mimics normal object-key disambiguation in Evennia.</p>
</li>
<li>
<p>Recognition. You can assign your own aliases to people. If Sandra introduces herself you could assign her the name <strong>Sandra</strong> and henceforth be able to reference her as such and see that name appear. But you could also name her <strong>The girl calling herself Sandra</strong> if you didn't believe that's her actual name.</p>
</li>
<li>
<p>Languages. Everything within double-quotes is parsed as spoken language (like the Hello! above). By using writing this as <strong>(elvish)&quot;Hello!&quot;</strong>, this could be spoken in another language and those who don't speak elvish would receive an obfuscated string.</p>
</li>
<li>
<p>Masking. A person wearing a mask can force people's recognition replacement to deactivate so that they are not recognized anymore.</p>
</li>
</ul>
<p>The emoting contrib comes as two files in evennia/contrib/: rpsystem.py and rplanguage.py. To use them fully, make your Characters and Rooms inherit from the supplied classes and/or add the new commands to the Character command set. Enjoy!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-10-02-emoting-system" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-09-29-evennia-on-`podcast.__init__`>
     Evennia on `podcast.__init__`
    <a class="devblog-headerlink" href="2015.html#2015-09-29-evennia-on-`podcast.__init__`" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- September 29, 2015</div>
</h1>
<p><a href="http://pythonpodcast.com/images/podcast_init_logo.png"><img src="https://lh6.googleusercontent.com/proxy/vHgHjWEhvYzINt2GwdHGR_s1jI4YncKvh3lIVRCM93oiRAcG4yBpMSIBidwGJ2-kNKprClzeyJMDHM84-QeMJxOyYTHcP_U8GA=s0-d" alt="" /></a></p>
<p>So a few weeks back I was contacted by the general Python podcast <em>Podcast.<strong>init</strong></em>. They had stumbled on Evennia and were intrigued about MUD development still going on - and in Python even!</p>
<p>As it turned out at least one of the two hosts were an old-school MU* gamer and between the two of them they had plenty of good questions both on multiplayer text games in general and about Evennia technology in particular.</p>
<p>You can listen to my accent via one of the links below:</p>
<ul>
<li>
<p>Google+: <a href="https://plus.google.com/+Podcastinit-the-python-podcast/posts/Vu9dPVjsR9h">https://plus.google.com/+Podcastinit-the-python-podcast/posts/Vu9dPVjsR9h</a></p>
</li>
<li>
<p>Show Notes: <a href="http://pythonpodcast.com/griatch_evennia.html">http://pythonpodcast.com/griatch_evennia.html</a></p>
</li>
<li>
<p>Patreon Post: <a href="https://www.patreon.com/posts/3448526">https://www.patreon.com/posts/3448526</a></p>
</li>
<li>
<p>Twitter Announcement: <a href="https://twitter.com/Podcast__init__/status/648703365019529216">https://twitter.com/Podcast__init__/status/648703365019529216</a></p>
</li>
</ul>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p>Logo ©<code>Podcast.__init__</code></p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-09-29-evennia-on-`podcast.__init__`" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-09-24-pushing-through-a-straw>
    Pushing through a straw
    <a class="devblog-headerlink" href="2015.html#2015-09-24-pushing-through-a-straw" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- September 24, 2015</div>
</h1>
<p><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/DrinkingStraws.jpg/401px-DrinkingStraws.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/DrinkingStraws.jpg/401px-DrinkingStraws.jpg" alt="" /></a></p>
<p>Recently, a user reported a noticeable delay between sending a command in-game to multiple users and the result of that command appearing to everyone. You didn't notice this when testing alone but I could confirm there was almost a second delay <em>sometimes</em> between entering the command and some users seeing the result. A second is very long for stuff like this. Processing time for a single command is usually in the milliseconds. What was going on?</p>
<h3>Some background</h3>
<p>Evennia has two components, the <em>Portal</em> and the <em>Server,</em> running as two separate processes_._ The basic principle is that players connecting to an Evennia instance connects to the Portal side - this is the outward facing part of Evennia. The connection data and any other input and output will be piped from the Portal to the Server and back again.</p>
<p>The main reason for this setup is that it allows us to completely reset the Server component (reloading module data in memory is otherwise error-prone or at least very tricky to make generically work in Python) without anyone getting disconnected from the Portal. On the whole it works very well.</p>
<h3>Debugging</h3>
<p>Tracing of timings throughout the entire Server&lt;-&gt;Portal pipeline quickly led me to rule out the command handler or any of the core systems being responsible - including both sides of the process divide was a few milliseconds. But in the <em>transfer</em> between Portal and Server, an additional <em>900</em> miliseconds were suddenly added! This was clearly the cause for the delay.</p>
<p>Turns out that it all came down to faulty optimization. At some point I built a batch-send algorithm between the Server and Portal. The idea was to group command data together if they arrived too fast - bunch them together and send them as a single batch. In theory this would be more efficient once the rate of command sending increased. It was partly a DoS protection, partly a way to optimize transfer handling.</p>
<p>The (faulty) idea was to drop incoming data into a queue and if the rate was too high, wait to empty that queue until a certain &quot;command/per second&quot; rate was fullfilled. There was also a timed routine that every second force-emptied the queue to make sure it would be cleaned up also if noone made any further commands.</p>
<p>In retrospect it sounds silly but the &quot;rate of command&quot; was based on a simple two-time-points derivative;</p>
<blockquote>
<p>rate = 1 / (now - last_command_time)</p>
</blockquote>
<p>If this rate exceeded a set value, the batch queuing mechanism would kick in. The issue with this (which is easy to see now) is that if you set your limit at (say) 100 commands / second, two commands can happen to enter so close to each other time that their rate far exceed that limit just based on the time passed between them. But <em>there are not actually 100 commands coming in every second</em> which is really what the mechanism was meant to react to.</p>
<p>So basically using a moment-to-moment rate like this is just too noisy to be useful; the value will jump all over the place. The slowdown seen was basically the DoS protection kicking in because when you are relaying data to other users, each of them will receive &quot;commands&quot; in quick succession - fast enough to trigger the limiter. These would be routed to the queue and the sometimes-delay simply depended on  when the queue cleanup mechanism happened to kick in.</p>
<h3>Resolution</h3>
<p>Once having identfied the rate measuring bug, the obvious solution to this would be to gather command rates over a longer time period and take an average - you will then filter out the moment-to-moment noise and get an actually useful rate.</p>
<p>Instead I ended up going with an even simpler solution: Every command that comes in ups a counter. If I want a command rate limit of 100 commands/second, I wait until that counter reaches 100. At that point I check when the time difference between now and when the counter was last reset. If this value is below 1, well then our command rate is higher than 100/second and I can kick in whatever queuing or limiter is needed. The drawback is that until you have 100 commands you won't know the rate. In practice though, once the rate is high enough to be of interest, this simple solution leads to an automatic check with minimal overhead.</p>
<p>In the end I actually removed the batch-sending component completely and instead added command DoS protection higher up on the Portal side. The Command-input is now rate limited using the same count-until-limit mechanism. Seems to work fine. People have no artificial slowdowns anymore and the DoS limiter will only kick in at loads that are actually relevant. And so all was again well in Evennia world.</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-09-24-pushing-through-a-straw" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-08-27-a-wagon-load-of-post-summer-updates>
    A wagon load of post summer updates
    <a class="devblog-headerlink" href="2015.html#2015-08-27-a-wagon-load-of-post-summer-updates" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- August 27, 2015</div>
</h1>
<p><a href="http://img10.deviantart.net/adb4/i/2012/322/f/8/the_troll_here_a_cometh_by_griatch_art-d5kp988.jpg"><img src="https://lh3.googleusercontent.com/proxy/5aVkih3LRcrhVNGudLivJ7KJPkDL7bYpusuEQuygCeBQSlnWXawPMkI4a4WCeYkwfnp5LewB3XhGUdNYzcVGd40ZLAz6Oy_-PdVhyZrJtGZqYvBsBOdC8y6cYmiAJ4Vz00l2hv3gQ70yYKbYQyT8khFQFS6grg=s0-d" alt="" /></a></p>
<p>Summer vacations are over and work resumes in Evennia land! Here's a wagon-load of small updates on what's going on.</p>
<h3>Ainneve</h3>
<p>The <a href="https://github.com/evennia/ainneve">Ainneve project</a>, the creation of an official, open-source Evennia demo game, has gotten going. The lead devs of the project are keen to make this a collaborative effort and there is a lot of good discussion and code being written. After some slowdown at the end of summer it's bound to pick up again.</p>
<p>Ainneve's a rare chance to see a full MUD getting developed from scratch out in the open. <a href="https://github.com/evennia/ainneve/issues">The current issue list</a> includes tags for difficulty and allows also newbie Python coders to jump in. Not to mention you have a chance to get valuable feedback on your work by seasoned coders!</p>
<p>So if you are at all interested in making a MUD, try out Python/Evennia or just get involved in a semi-big programming project, this is a great chance to do so.</p>
<h3>Imaginary Realities</h3>
<p>Since a few weeks, there is a new issue of <a href="http://journal.imaginary-realities.com/index.html">Imaginary realities</a> (vol 7, issue 3) is out. As usual I have an article in it. This venerable e-zine was revitalized to include articles on both MU* as well as roguelikes, Interactive fiction and others. Not only is this issue the most content-rich since the reboot, with this issue they have also spruced up their interface to make past issues easier to navigate.</p>
<ul>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/a-text-mud-with-a-working-ecology-system/index.html">A text MUD with a working ecology system</a>&quot; - in this article Molly O'Hara  details the concepts behind simulating a functioning ecologic network in a game. Interesting stuff and some parts of this is certainly worth considering for any open-world game design. I wonder at which level of detail the system become more complex than the players can appreciate though.</p>
</li>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/dispelling-the-gloom/index.html">Dispelling the gloom</a>&quot; by Tomasz Gruca is an interesting essay on the author's history growing up in the former Soviet Union and eventually finding text adventure games and interactive fiction, a passion he has apparently lately re-kindled. He makes the observation that the current &quot;retro&quot; trend of games have not really reached back to the text-based game world when it comes to mainstream acceptance.</p>
</li>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/how-integral-are-letters-and-text-to-ascii-gaming/index.html">How integral are letters and text to ASCII gaming?</a>&quot;by Mark R. Johnson goes into the practical use of ASCII in traditional rogue-like games (beyond nostalgia). This is a meaty article that goes into both text-as-graphics as well as the use of text for aiding imagination and suggest subtle puzzles in some classic rogue-likes.</p>
</li>
<li>
<p><a href="http://journal.imaginary-realities.com/volume-07/issue-03/legend-and-the-lore/index.html">&quot;Legend and the lore&quot;</a> (Hugo Zombiestalker) proclaims the death of the traditional point-and-click adventure game and but then moves on to try to distill just why those games nevertheless was so appealing to him and how it can be applied in modern game designs like zombie-survival MUD <em>Epitath</em> which he is a senior developer for. Plenty of good observations here!</p>
</li>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/the-bonds-of-mudding/index.html">The bonds of mudding&quot;</a> by Clint Itan Kuranes Knapp writes about the community that can spring up on a long-running MUD, the interactions the friends and the relationships that could persist already long before &quot;social media&quot; became a buzz word. A warm text with plenty of anecdotes and examples and things to ponder for both designers and staff when wanting to cater for this type of player bonding.</p>
</li>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/the-mercurial-temperament-at-the-end-of-the-world/index.html">The mercurial temperament at the end of the world&quot;</a> (Drakkos) discusses NPCs and how they rarely are as interactive as one would want (the term &quot;vend a chat&quot; is a good one I think). He then goes on to how they have implemented their &quot;Mercurial&quot; system for NPCs in <em>Epitath</em>. This seems to be a state-AI system where NPCs have moods that affects what they say based on their circumstance and relation to other actors in the world. Sounds really cool and since he goes into some details on the implementation there is a lot to ponder here.</p>
</li>
<li>
<p>&quot;<a href="http://journal.imaginary-realities.com/volume-07/issue-03/where-do-i-begin/index.html">Where do I begin?</a>&quot; by me, Griatch, discusses one of the more common questions we get in the Evennia chat - 'I want to make a MUD, but how do I begin?' This article starts before Evennia's Game planning wiki page - it discusses assessing your capabilities and resources in the form of programming skills, code bases and motivations to help you figure out what you can realistically accomplish.</p>
</li>
</ul>
<h3>Evennia Web client</h3>
<p>In the pipeline I have some updates to Evennia's websocket/JSON MUD-web client component. These are changes that are intended to make the webclient easier to customize and hook into Evennia output using only HTML/CSS. More details on this will be forthcoming when I have more solid stuff to show.</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-08-27-a-wagon-load-of-post-summer-updates" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-06-22-announcing-the-evennia-example-game-project-"ainneve">
     Announcing the Evennia example-game project "Ainneve"
    <a class="devblog-headerlink" href="2015.html#2015-06-22-announcing-the-evennia-example-game-project-"ainneve"" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- June 22, 2015</div>
</h1>
<p><a href="https://1.bp.blogspot.com/-QZScgcWodAg/UZu0R2DaJOI/AAAAAAAAAIw/57rwaNQNyx8/s1600/Sunrise+landscape+render+retouches.png"><img src="https://1.bp.blogspot.com/-QZScgcWodAg/UZu0R2DaJOI/AAAAAAAAAIw/57rwaNQNyx8/s1600/Sunrise+landscape+render+retouches.png" alt="" /></a></p>
<p>The Evennia example-game project is underway!</p>
<p>I was quite impressed with the response I got on the mailing list to my call for developing an Evennia example game (see my <a href="http://evennia.blogspot.se/2015/06/need-your-help.html">Need your Help</a> blog post).</p>
<p>The nature of the responses varied, many were from interested people with little to no experience in Evennia or Python whereas others had the experience but not the time to lead it. It was however clear that the interest to work on an &quot;official&quot; Evennia game is quite big.</p>
<p>I'm happy to announce, however, that after only a week we now have a solid lead developer/manager, <a href="https://github.com/ergodicbreak">George Oliver</a>. Helping him on the technical/architecture side is <a href="https://github.com/whitenoiseoss">Whitenoise</a> (who, despite a barren github profile, is a professional developer).</p>
<p>George put together a <a href="https://docs.google.com/document/d/1fu-zYvFytKHGxFHD6_bLQ4FrotAQ0izXuWE_gn8q2Oc/edit">game proposal</a> based on the <a href="http://geekguild.com/openadventure/">OpenAdventure</a> rpg, an open-source (CC-SA) ruleset that is also <a href="https://github.com/openadventure/Open-Adventure">found on github</a>. The example game is to be named &quot;Ainneve&quot; and its development is found in a <a href="https://github.com/evennia/ainneve">in a separate repository under the github Evennia organisation</a>.</p>
<p>All the relevant links and future discussion can be found <a href="https://groups.google.com/forum/#%21msg/evennia/rOMo5DwhXgE/0jmCpj4gITYJ">on the mailing list</a>.</p>
<p>George and whitenoise have already made it clear that they aim to not only make Ainneve a good example Evennia game for others to learn from and build on, but to make the development itself a possibility for people of all skill levels to get involved. So get in touch with them if you are at all interested in Python, Evennia and mud development!</p>
<p>So thanks to George and whitenoise for taking this on, looking forward to see where it leads!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p><em>Image from <a href="http://loveintoblender.blogspot.se/p/blog-page_21.html">loveintoblender</a>.</em></p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-06-22-announcing-the-evennia-example-game-project-"ainneve"" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-06-15-need-your-help!>
     Need your help!
    <a class="devblog-headerlink" href="2015.html#2015-06-15-need-your-help!" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- June 15, 2015</div>
</h1>
<p><a href="https://sites.google.com/site/evenniaserver/_/rsrc/1429261373725/old_evennia/demo_color.png"><img src="https://sites.google.com/site/evenniaserver/_/rsrc/1429261373725/old_evennia/demo_color.png" alt="" /></a><em>This for all you developers out there who want to make a game with Evennia but are not sure about what game to make or where to start off.</em></p>
<h3>We need an example game</h3>
<p>One of the main critiques Evennia get from newbies is the lack of an (optional) full game implementation to use as an example and base to build from. So, Evennia needs a full, BSD-licensed example game. I'm talking &quot;diku-like&quot;, something you could in principle hook up and allow players into within minutes of installing Evennia. The Tutorial world we already have is a start but it is more of a solo quest, it's not designed to be a full multiplayer game. Whereas Evennia supports other forms of MU* too, the idea is that the systems from a more &quot;code-heavy&quot; MUD could easily be extracted and adopted to a more freeform-style game whereas the reverse is not generally true.</p>
<p>The exact structure of such a game would be up to the person or team taking this on, but it should be making use of Evennia's api and come distributed as a custom game folder (the folder you get with evennia --init). We will set this up as a separate repository under the <a href="https://github.com/evennia">Evennia github organisation</a> - a spin-off from the main evennia project, and maintained separately.</p>
<h3>We need you!</h3>
<p>Thing is, while I am (and, I'm sure other Evennia core devs) certainly willing to give considerable help and input on such a project, it's <em>not</em> something I have time to take the <em>lead</em> on myself. So I'm looking for enthusiastic coders who would be willing to step up to both help and <em>take the lead</em> on this; both designing and (especially) coding such an example game. Even if you have your own game in mind for the future, you <em>still</em> need to build most of these systems, so starting with a generic system will still help you towards that final goal - plus you get to be immortalized in the code credits, of course.</p>
<h3></h3>
<p>Suggestion for game</p>
<p>Being an example game, it should be well-documented and following good code practices (this is something we can always fix and adjust as we go though). The systems should be designed as stand-alone/modular as possible to make them easy to rip out and re-purpose (you know people will do so anyway). These are the general features I would imagine are needed (they are open to discussion):</p>
<ul>
<li>
<p>Generic fantasy theme (lore is not the focus here, but it can still be made interesting)</p>
</li>
<li>
<p>Character creation module</p>
</li>
<li>
<p>Races (say, 2-3)</p>
</li>
<li>
<p>Classes (say 2-3)</p>
</li>
<li>
<p>Attributes and Skills (based on D&amp;D? Limit number of skills to the minimal set)</p>
</li>
<li>
<p>Rule module for making skill checks, rolls etc (D&amp;D rules?)</p>
</li>
<li>
<p>Combat system (twitch? Turn-based?)</p>
</li>
<li>
<p>Mobs, both friendly and aggressive, with AI</p>
</li>
<li>
<p>Trade with NPC / other players (money system)</p>
</li>
<li>
<p>Quest system</p>
</li>
<li>
<p>Eventual new GM/admin tools as needed</p>
</li>
<li>
<p>Small game world (batch-built) to demonstrate all features (of good quality to show off)</p>
</li>
<li>
<p>More? Less?</p>
</li>
</ul>
<h3>I'm interested!</h3>
<p>Great! We are as a first step looking for a driven <strong>lead dev</strong> for this project, a person who has the enthusiasm, coding experience and <em>drive</em> to see the project through and manage it. You will (hopefully) get plenty of collaborators willing to help out but It is my experience that a successful hobby project really needs at least one person taking responsibility to &quot;lead the charge&quot; and having the final say on features: Collaborative development can otherwise easily mean that everyone does their own thing or cannot agree on a common course. This would be a spin-off from the main Evennia project and maintained separately as mentioned above.</p>
<p>Reply to <a href="https://groups.google.com/forum/#%21msg/evennia/48PMDirb7go/w_hZ1mWhH8AJ">this thread</a> if you are willing to participate <strong><em>at any level</em></strong> to the project, including chipping in with code from your already ongoing development. I don't know if there'd be any &quot;competition&quot; over the lead-dev position but if multiple really enthusiastic and willing devs step forward we'll handle that then.</p>
<p>So get in touch!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-06-15-need-your-help!" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-05-30-dreaming-big?>
     Dreaming big?
    <a class="devblog-headerlink" href="2015.html#2015-05-30-dreaming-big?" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- May 30, 2015</div>
</h1>
<p><a href="https://1.bp.blogspot.com/-o3D_2InpMD0/VWnYBCUe2QI/AAAAAAAAEaQ/3JCuwjCrzjA/s1600/Battle_of_the_throne_small.jpg"><img src="https://1.bp.blogspot.com/-o3D_2InpMD0/VWnYBCUe2QI/AAAAAAAAEaQ/3JCuwjCrzjA/s320/Battle_of_the_throne_small.jpg" alt="" /></a></p>
<p>Optional Reality's <a href="http://optionalrealities.com/forums/index.php?topic=13.0">Dreaming Big Challenge</a> has come to an end. This was a challenge about designing a &quot;sales pitch&quot; in 600 words or less for a text-based online roleplaying game. This is the kind of pitch you'd tease knowledgeable investors with -  if investors cared about multiplayer text games and you ended up in an elevator with one, that is.</p>
<p>There were 10 entries to the competition and as the <a href="http://optionalrealities.com/forums/index.php?topic=101.0">results are now in</a> (including very elaborate judge feedback!), I encourage you to go read all the entries. The focus was on originality and fresh ideas and maybe these short pitches represent a cross-section of the current trends or a whiff of where the wind is blowing for future games. Or maybe it will help inspire you to make a sales pitch of your own.</p>
<p>You can find all the entries <a href="http://optionalrealities.com/forums/index.php?topic=100.0">linked from the second post of this thread.</a> Enjoy!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        
    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-05-30-dreaming-big?" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-05-11-things-goin-on>
    Things goin on
    <a class="devblog-headerlink" href="2015.html#2015-05-11-things-goin-on" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- May 11, 2015</div>
</h1>
<p><a href="https://4.bp.blogspot.com/-2Y8na9nvtog/VU_WU7zs8uI/AAAAAAAAEYc/IyRyP69b99w/s1600/Truss-Stage-Light-Truss-.jpg"><img src="https://4.bp.blogspot.com/-2Y8na9nvtog/VU_WU7zs8uI/AAAAAAAAEYc/IyRyP69b99w/s200/Truss-Stage-Light-Truss-.jpg" alt="" /></a></p>
<p>We are currently in a maintenance and cleanup phase of Evennia, where bugs are found and reported and things are getting more and more stable as people learn and use the new features we merged a few months back.</p>
<p>Overall though I must say the relatively big changes we did to the infrastructure (making Evennia into a full library and making a complete overhaul of the typeclass system behind the scenes) went over with surprising smoothness. There were a flurry of things to fix immediately after the devel-branch merger but no more than expected. For the big changes it really worked very well I think, with no big disaster stories. We have a few bugs lingering in the issue tracker that need to be addressed but nothing show-stopping.</p>
<p>I have been a bit busy with various projects off-MUD so to speak. I was contracted for making the cover and illustration for a book (this is not hobby art for once, but a professional commission which I was quite excited to be asked to do). I also author and draw <a href="http://griatch-art.deviantart.com/art/Crossing-borders-page-1-527982536">a fantasy comic as part of another project.</a></p>
<p>I've not been slacking off on on the MUD side though: I have written and submitted an article for the revived <a href="http://journal.imaginary-realities.com/">Imaginary Realities e-zine</a> (next issue should be out end of May/early June?) and another article (on Evennia) for the new <a href="http://optionalrealities.com/">Optional Realities</a> MUD community website. I also contributed a game-design blurb for the latter's <a href="http://optionalrealities.com/forums/index.php?topic=13.0">Dreaming Big</a> contest, where you compete (for cash prizes, actually!) by submitting a game sale's pitch under 600 words.</p>
<p>The above mentioned Optional Realities website is so far picking up pace with quite good discussion in its forums (the similarity of name with Imaginary Realities is unfortunate, apparently they were not aware of the former when choosing it).  While targeted at discussions of RPI-style games (a sort of sub-genre of roleplay-enforced MUDs with perma-death), it already hosts several invited articles on game design and general game development that can be interesting for any MU* dev.</p>
<p>People should know by now that I like to support MUD community efforts when possible, and Evennia is thus  listed as an official &quot;affiliate&quot; to Optional Realities (which admittedly means little more than us linking to each other but still). The team behind OR is however also using Evennia for their own &quot;Project Redshift&quot; Sci-fi mud, so we hope to get plenty of good feedback as their project matures.</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p><em>Image: Truss from Gems NFX</em></p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-05-11-things-goin-on" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-05-09-documenting-python-without-sphinx>
    Documenting Python without Sphinx
    <a class="devblog-headerlink" href="2015.html#2015-05-09-documenting-python-without-sphinx" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- May  9, 2015</div>
</h1>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/La_Granja_de_San_Ildefonso_Sfinx01.jpg/800px-La_Granja_de_San_Ildefonso_Sfinx01.jpg"><img src="https://lh4.googleusercontent.com/proxy/KbIwdEDoKI3YPVgVArY87c8tHYHbRamzP5RsqyRKu62rVXabv9fFLBgcMorVujBaKdsfxtKnFpUUNS1z3OkGBo-en1f9pwaNyYeTu08PxNSR3EB_Zjvs9LtQfcSzXx_h7dU4RdnC81jTtAkfoGEewKp4KOP3dnml_Z6yAMdPFWHjU_r8T5_jjC7Oi0pKp3w1PV9_ep2u9zCF1dLEgvoHDIs=s0-d" alt="" /></a></p>
<p>Last week Evennia merged its development branch <a href="http://evennia.blogspot.se/2015/01/building-django-proxies-and-mud.html">with all the features mentioned in the last post</a>. Post-merger we have since gone through and fixed remaining bugs and shortened the list at a good clip.</p>
<p>One thing I have been considering is how to make Evennia's API auto-documenting - we are after all a MUD creation library and whereas our code has always been well-documented the docs were always only accessible from the source files themselves.</p>
<p>Now, when you hear &quot;Python&quot; and &quot;documentation&quot; in the same sentence, the first thought usually involves Sphinx or <a href="http://sphinx-doc.org/ext/autodoc.html">Sphinx autodoc</a> in some form. Sphinx produces <a href="https://docs.djangoproject.com/en/1.7/">very nice looking documentation</a> indeed. My problem is however as follows:</p>
<ul>
<li>
<p>I don't want our API documentation to be written in a different format from the rest of our documentation, which is in Github's wiki using Markdown.  Our users should be able to help document Evennia without remembering which formatting language is to be used.</p>
</li>
<li>
<p>I don't like reStructuredText syntax. This is a personal thing. I get that it is powerful but it is also really, really ugly to read in its raw form in the source code. I feel the sources must be easy to read on their own.</p>
</li>
<li>
<p>Sphinx plugins like <a href="http://sphinx-doc.org/latest/ext/napoleon.html">napoleon</a> understands this ugliness and allows you to document your functions and classes in a saner form, such as the &quot;Google style&quot;. One still needs reST for in-place formatting though.</p>
</li>
<li>
<p>Organizing sphinx document trees is fiddly and having had a few runs with sphinx autodoc it's just a mess trying to get it to section the Evennia sources in a way that makes sense. It could probably be done if I worked a lot more with it, but it's a generic page generator and I feel that I will eventually have to get down to make those toctrees myself before I'm happy.</p>
</li>
<li>
<p>I want to host the API docs as normal Wiki files on Github (this might be possible with reST too I suppose).</p>
</li>
</ul>
<p>Long story short, rather than messing with getting Sphinx to do what I want, I ended up writing my own api-to-github-Markdown parser for the Evennia sources: api2md. Using Python's inspect module and aiming for a subset of the <a href="http://sphinx-doc.org/latest/ext/example_google.html">Google formatted docstrings</a>, this was maybe a day's work in total - the rest was/is fine-tuning for prettiness.</p>
<p>Now whenever the source is updated, I follow the following procedure to fully update the API docs:</p>
<ol>
<li>
<p>I pull the latest version of Evennia's wiki git repository from github alongside the latest version of the main Evennia repository.</p>
</li>
<li>
<p>I run api2md on the changed Evennia sources. This crawls the main repo for top-level package imports (which is a small list currently hard-coded in the crawler - this is to know which modules should create &quot;submodule&quot; pages rather than try to list class contents etc). Under each package I specify it then recursively gets all modules. For each module in that package, it creates a new Markdown formatted wiki page which it drops in a folder in the wiki repository. The files are named after the model's path in the library, meaning you get files like evennia.objects.models.md and can easily cross-link to subsections (aka classes and functions) on a page using page anchors.</p>
</li>
<li>
<p>I add eventual new files and commit the changes, then push the result to the Github wiki online. Done!</p>
</li>
</ol>
<p>(I could probably automate this with a git hook. Maybe as a future project.)</p>
<p>The api2md program currently has some Evennia-custom elements in it (notably in which packages it imports) but it's otherwise a very generic parser of Python code into Markdown. It could maybe be broken out into its own package at some point if there's interest.</p>
<p>The interesting thing is that since I already have code for <a href="http://evennia.blogspot.se/2014/02/moving-from-google-code-to-github.html">converting our wiki to reST</a> and ReadTheDocs, I should be able to get the best of both worlds and convert our API wiki pages the same way later. The result will probably not be quite as custom-stunning as a Sphinx generated autodoc (markdown is a lot simpler in what formatting options it can offer) but that is a lesser concern.</p>
<p>So far very few of Evennia's docstrings are actually updated for the Google style syntax (or any type of formatting, really) so the result is often not too useful. We hope that many people will help us with the doc strings in the future - it's a great and easy way to get to know Evennia while helping out.</p>
<p>But where the sources <em>are</em> updated, <a href="https://github.com/evennia/evennia/wiki/evennia.utils.evtable">the auto-generated wiki page looks pretty neat</a>.</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p>(Image from <a href="http://en.wikipedia.org/wiki/File:La_Granja_de_San_Ildefonso_Sfinx01.jpg">Wikimedia commons</a>)</p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-05-09-documenting-python-without-sphinx" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
                    <hr>
                    <div class="blog_post">
                    <h1 id=2015-01-19-building-django-proxies-and-mud-libraries>
    Building Django proxies and MUD libraries
    <a class="devblog-headerlink" href="2015.html#2015-01-19-building-django-proxies-and-mud-libraries" title="Permalink to this blog post">¶</a>
    <div class="devblog-title-date">- January 19, 2015</div>
</h1>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/5/5e/Bibliothek_St._Florian.jpg"><img src="https://lh5.googleusercontent.com/proxy/06dVvLrRNe-EqZJBbCF12T6O69WuNMoJpK1Vo_aIRTed86sKe49GhKvHrA_y02GuSOxzZQGojbU0YCyHQzqWXVJME8YUJd89A3IDqqCag5b_xnBXxNwwPlq4Mpd7a7JdNQ=s0-d" alt="" /></a></p>
<p>2015 is here and there is a lot of activity going on in Evennia's repository, mailing list and IRC channel right now, with plenty of people asking questions and starting to use the system to build online games.</p>
<p>We get newcomers of all kinds, from experienced coders wanting to migrate from other code bases to newbies who are well versed in mudding but who aim to use Evennia for learning Python. At the moment the types of games planned or under development seems rather evenly distributed between RPI-style MUDs and MUSH games (maybe with a little dominance of MUSH) but there are also a couple of hack-and-slash concepts thrown into the mix. We also get some really wild concepts pitched to us now and then. What final games actually comes of it, who can tell, but people are certainly getting their MU*-creative urges scratched in greater numbers, which is a good sign.</p>
<p>Since Christmas our <em>&quot;devel&quot;</em> branch is visible online and is teeming with activity. So I thought I'd post an summary about it in this blog. The more detailed technical details for active developers can be found on Evennia's mailing list <a href="https://groups.google.com/forum/#%21topic/evennia/6ug7m872GIk">here</a> (note that full docs are not yet written for devel-branch).</p>
<h2>Django proxies for Typeclasses</h2>
<p>I have written about Evennia's Typeclass system before on this blog. It is basically a way to &quot;decorate&quot; Django database models with a second set of classes to allow Evennia developers to create any type of game entity without having to modify the database schema. It does so by connecting one django model instance to one typeclass instance and overloading <strong>setattr</strong> and <strong>getattribute</strong> to transparently communicate between the two.</p>
<p>For the devel branch I have refactored our typeclass system to make use of Django's <em><a href="https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models">proxy models</a></em> instead. Proxy models have existed for quite a while in Django, but they simply slipped under my radar until a user pointed them out to me late last year. A proxy model is basically a way to &quot;replace the Python representation of a database table with a proxy class&quot;. Sounds like a Typeclass, doesn't it?</p>
<p>Now, proxy models doesn't work <em>quite</em> like typeclasses out of the box - for one thing if you query for them in the database you will get back the original model and not the proxy one. They also do not allow multiple inheritance. Finally I don't want Evennia users to have to set up django Meta info every time they use a proxy. So most work went into overloading the proxy multiclass inheritance check (there is a django issue about how to fix this). Along the way I also redefined the default managers and <strong>init</strong> methods to always load the proxy actually searched for and not the model. I finally created metaclasses to handle all the boilerplate. We choose to keep the name <em>Typeclass</em> also for this extended proxy. This is partly for legacy reasons, but typeclasses do have their own identity: they are not vanilla Django-proxies nor completely normal Python classes (although they are very close to the latter from the perspective of the end user).</p>
<p>Since typeclasses now are directly inheriting from the base class (due to meta-classing this looks like normal Python inheritance), it makes things a lot easier to visualize, explain and use. Performance-wise this system is en par with the old, or maybe a little faster, but it will also be a lot more straight forward to cache than the old. I have done preliminary testing with threading and it looks promising (but more on that in a future post).</p>
<h2>Evennia as a Python library package</h2>
<p>Evennia has until now been solely distributed as a version controlled source tree (first under SVN, then Mercurial and now via GIT and Github). In its current inception you clone the tree and find inside it a game/ directory where you create your game. A problem we have when helping newbies is that we can't easily put pre-filled templates in there - if people used them there might be merge conflicts when we update the templates upstream. So the way people configure Evennia is to make copies of template modules and then change the settings to point to that copy rather than the default module. This works well but it means a higher threshold of setup for new users and a lot of describing text. Also, while learning GIT is a useful skill, it's another hurdle to get past for those who just want to change something minor to see if Evennia is for them.</p>
<p>In the devel branch, Evennia is now a library. The game/ folder is no longer distributed as part of the repository but is created dynamically by using the new binary evennia launcher program, which is also responsible for creating (or migrating) the database as well as operating the server:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>evennia --init mygame  

cd mygame  

evennia migrate  

evennia start
</pre></div>

<p>Since this new folder is <em>not</em> under our source tree, we can set up and copy pre-made template modules to it that people can just immediately start filling in without worrying about merge conflicts. We can also dynamically create a setting file that fits the environment as well as set up a correct tree for overloading web functionality and so on. It also makes it a lot easier for people wanting to create multiple games and to put their work under separate version control.</p>
<p>Rather than traversing the repository structure as before you henceforth will just do import evennia in your code to have access to the entirety of the API. And finally this means it will (eventually) be possible to install Evennia from <a href="https://pypi.python.org/pypi/Evennia-MUD-Server/Beta">pypi</a> with something like pip install evennia. This will greatly ease the first steps for those not keen on learning GIT.</p>
<h2>For existing users</h2>
<p>Both the typeclasses-as-proxies and the evennia library changes are now live in the devel branch. Some brave users have already started taking it through its paces (and is helping to flesh it out) but it will take some time before it merges into master.</p>
<p>The interesting thing is that despite all this sounding like a huge change to Evennia, the coding API doesn't change very much, the database schema almost not at all. With the exception of some properties specific to the old connection between the typeclass and model, code translate over pretty much without change from the developer's standpoint.</p>
<p>The main translation work for existing developers lies in copying over their code from the old game/ directory to the new dynamically created game folder. They need to do a search-and-replace so that they import from evennia rather than from src or ev. There may possibly be some other minor things. But so far testers have not found it too cumbersome or time consuming to do. And all agree that the new structure is worth it.</p>
<p>So, onward into 2015!</p>

<footer class="devblog-footer">
    <span class="devblog-copyrights">
        <p>Image: &quot;Bibliothek St. Florian&quot; by Original uploader was Stephan Brunker at de.wikipedia Later versions were uploaded by Luestling at de.wikipedia. - Originally from de.wikipedia; description page is/was here.. Licensed under CC BY-SA 3.0 via Wikimedia Commons - <a href="http://commons.wikimedia.org/wiki/File:Bibliothek_St._Florian.jpg#mediaviewer/File:Bibliothek_St._Florian.jpg">link</a></p>

    </span>
    <a class="devblog-to-toplink" href="2015.html#2015-01-19-building-django-proxies-and-mud-libraries" title="Link to top of post">⇬(top)</a>
</footer>
                    </div>
                
            </section>
    </body>
</html>