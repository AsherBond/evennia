
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>typeclasses.objects &#8212; Evennia 0.9.5 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Evennia 0.9.5</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">typeclasses.objects</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for typeclasses.objects</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Object</span>

<span class="sd">The Object is the &quot;naked&quot; base class for things in the game world.</span>

<span class="sd">Note that the default Character, Room and Exit does not inherit from</span>
<span class="sd">this Object, but from their respective default implementations in the</span>
<span class="sd">evennia library. If you want to use this class as a parent to change</span>
<span class="sd">the other types, you can do so by adding this as a multiple</span>
<span class="sd">inheritance.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">evennia</span> <span class="k">import</span> <span class="n">DefaultObject</span>


<span class="k">class</span> <span class="nc">Object</span><span class="p">(</span><span class="n">DefaultObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the root typeclass object, implementing an in-game Evennia</span>
<span class="sd">    game object, such as having a location, being able to be</span>
<span class="sd">    manipulated or looked at, etc. If you create a new typeclass, it</span>
<span class="sd">    must always inherit from this object (or any of the other objects</span>
<span class="sd">    in this file, since they all actually inherit from BaseObject, as</span>
<span class="sd">    seen in src.object.objects).</span>

<span class="sd">    The BaseObject class implements several hooks tying into the game</span>
<span class="sd">    engine. By re-implementing these hooks you can control the</span>
<span class="sd">    system. You should never need to re-implement special Python</span>
<span class="sd">    methods, such as __init__ and especially never __getattribute__ and</span>
<span class="sd">    __setattr__ since these are used heavily by the typeclass system</span>
<span class="sd">    of Evennia and messing with them might well break things for you.</span>


<span class="sd">    * Base properties defined/available on all Objects</span>

<span class="sd">     key (string) - name of object</span>
<span class="sd">     name (string)- same as key</span>
<span class="sd">     dbref (int, read-only) - unique #id-number. Also &quot;id&quot; can be used.</span>
<span class="sd">     date_created (string) - time stamp of object creation</span>

<span class="sd">     account (Account) - controlling account (if any, only set together with</span>
<span class="sd">                       sessid below)</span>
<span class="sd">     sessid (int, read-only) - session id (if any, only set together with</span>
<span class="sd">                       account above). Use `sessions` handler to get the</span>
<span class="sd">                       Sessions directly.</span>
<span class="sd">     location (Object) - current location. Is None if this is a room</span>
<span class="sd">     home (Object) - safety start-location</span>
<span class="sd">     has_account (bool, read-only)- will only return *connected* accounts</span>
<span class="sd">     contents (list of Objects, read-only) - returns all objects inside this</span>
<span class="sd">                       object (including exits)</span>
<span class="sd">     exits (list of Objects, read-only) - returns all exits from this</span>
<span class="sd">                       object, if any</span>
<span class="sd">     destination (Object) - only set if this object is an exit.</span>
<span class="sd">     is_superuser (bool, read-only) - True/False if this user is a superuser</span>

<span class="sd">    * Handlers available</span>

<span class="sd">     aliases - alias-handler: use aliases.add/remove/get() to use.</span>
<span class="sd">     permissions - permission-handler: use permissions.add/remove() to</span>
<span class="sd">                   add/remove new perms.</span>
<span class="sd">     locks - lock-handler: use locks.add() to add new lock strings</span>
<span class="sd">     scripts - script-handler. Add new scripts to object with scripts.add()</span>
<span class="sd">     cmdset - cmdset-handler. Use cmdset.add() to add new cmdsets to object</span>
<span class="sd">     nicks - nick-handler. New nicks with nicks.add().</span>
<span class="sd">     sessions - sessions-handler. Get Sessions connected to this</span>
<span class="sd">                object with sessions.get()</span>
<span class="sd">     attributes - attribute-handler. Use attributes.add/remove/get.</span>
<span class="sd">     db - attribute-handler: Shortcut for attribute-handler. Store/retrieve</span>
<span class="sd">            database attributes using self.db.myattr=val, val=self.db.myattr</span>
<span class="sd">     ndb - non-persistent attribute handler: same as db but does not create</span>
<span class="sd">            a database entry when storing data</span>

<span class="sd">    * Helper methods (see src.objects.objects.py for full headers)</span>

<span class="sd">     search(ostring, global_search=False, attribute_name=None,</span>
<span class="sd">             use_nicks=False, location=None, ignore_errors=False, account=False)</span>
<span class="sd">     execute_cmd(raw_string)</span>
<span class="sd">     msg(text=None, **kwargs)</span>
<span class="sd">     msg_contents(message, exclude=None, from_obj=None, **kwargs)</span>
<span class="sd">     move_to(destination, quiet=False, emit_to_obj=None, use_destination=True)</span>
<span class="sd">     copy(new_key=None)</span>
<span class="sd">     delete()</span>
<span class="sd">     is_typeclass(typeclass, exact=False)</span>
<span class="sd">     swap_typeclass(new_typeclass, clean_attributes=False, no_default=True)</span>
<span class="sd">     access(accessing_obj, access_type=&#39;read&#39;, default=False)</span>
<span class="sd">     check_permstring(permstring)</span>

<span class="sd">    * Hooks (these are class methods, so args should start with self):</span>

<span class="sd">     basetype_setup()     - only called once, used for behind-the-scenes</span>
<span class="sd">                            setup. Normally not modified.</span>
<span class="sd">     basetype_posthook_setup() - customization in basetype, after the object</span>
<span class="sd">                            has been created; Normally not modified.</span>

<span class="sd">     at_object_creation() - only called once, when object is first created.</span>
<span class="sd">                            Object customizations go here.</span>
<span class="sd">     at_object_delete() - called just before deleting an object. If returning</span>
<span class="sd">                            False, deletion is aborted. Note that all objects</span>
<span class="sd">                            inside a deleted object are automatically moved</span>
<span class="sd">                            to their &lt;home&gt;, they don&#39;t need to be removed here.</span>

<span class="sd">     at_init()            - called whenever typeclass is cached from memory,</span>
<span class="sd">                            at least once every server restart/reload</span>
<span class="sd">     at_cmdset_get(**kwargs) - this is called just before the command handler</span>
<span class="sd">                            requests a cmdset from this object. The kwargs are</span>
<span class="sd">                            not normally used unless the cmdset is created</span>
<span class="sd">                            dynamically (see e.g. Exits).</span>
<span class="sd">     at_pre_puppet(account)- (account-controlled objects only) called just</span>
<span class="sd">                            before puppeting</span>
<span class="sd">     at_post_puppet()     - (account-controlled objects only) called just</span>
<span class="sd">                            after completing connection account&lt;-&gt;object</span>
<span class="sd">     at_pre_unpuppet()    - (account-controlled objects only) called just</span>
<span class="sd">                            before un-puppeting</span>
<span class="sd">     at_post_unpuppet(account) - (account-controlled objects only) called just</span>
<span class="sd">                            after disconnecting account&lt;-&gt;object link</span>
<span class="sd">     at_server_reload()   - called before server is reloaded</span>
<span class="sd">     at_server_shutdown() - called just before server is fully shut down</span>

<span class="sd">     at_access(result, accessing_obj, access_type) - called with the result</span>
<span class="sd">                            of a lock access check on this object. Return value</span>
<span class="sd">                            does not affect check result.</span>

<span class="sd">     at_before_move(destination)             - called just before moving object</span>
<span class="sd">                        to the destination. If returns False, move is cancelled.</span>
<span class="sd">     announce_move_from(destination)         - called in old location, just</span>
<span class="sd">                        before move, if obj.move_to() has quiet=False</span>
<span class="sd">     announce_move_to(source_location)       - called in new location, just</span>
<span class="sd">                        after move, if obj.move_to() has quiet=False</span>
<span class="sd">     at_after_move(source_location)          - always called after a move has</span>
<span class="sd">                        been successfully performed.</span>
<span class="sd">     at_object_leave(obj, target_location)   - called when an object leaves</span>
<span class="sd">                        this object in any fashion</span>
<span class="sd">     at_object_receive(obj, source_location) - called when this object receives</span>
<span class="sd">                        another object</span>

<span class="sd">     at_traverse(traversing_object, source_loc) - (exit-objects only)</span>
<span class="sd">                              handles all moving across the exit, including</span>
<span class="sd">                              calling the other exit hooks. Use super() to retain</span>
<span class="sd">                              the default functionality.</span>
<span class="sd">     at_after_traverse(traversing_object, source_location) - (exit-objects only)</span>
<span class="sd">                              called just after a traversal has happened.</span>
<span class="sd">     at_failed_traverse(traversing_object)      - (exit-objects only) called if</span>
<span class="sd">                       traversal fails and property err_traverse is not defined.</span>

<span class="sd">     at_msg_receive(self, msg, from_obj=None, **kwargs) - called when a message</span>
<span class="sd">                             (via self.msg()) is sent to this obj.</span>
<span class="sd">                             If returns false, aborts send.</span>
<span class="sd">     at_msg_send(self, msg, to_obj=None, **kwargs) - called when this objects</span>
<span class="sd">                             sends a message to someone via self.msg().</span>

<span class="sd">     return_appearance(looker) - describes this object. Used by &quot;look&quot;</span>
<span class="sd">                                 command by default</span>
<span class="sd">     at_desc(looker=None)      - called by &#39;look&#39; whenever the</span>
<span class="sd">                                 appearance is requested.</span>
<span class="sd">     at_get(getter)            - called after object has been picked up.</span>
<span class="sd">                                 Does not stop pickup.</span>
<span class="sd">     at_drop(dropper)          - called when this object has been dropped.</span>
<span class="sd">     at_say(speaker, message)  - by default, called if an object inside this</span>
<span class="sd">                                 object speaks</span>

<span class="sd">     &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/evennia_logo.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<h3>Versions</h3>
<ul>
  <li><a href="../../../1.0-dev/index.html">1.0-dev (develop branch)</a></li>
  <li><a href="objects.html">0.9.5 (master branch)</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Evennia 0.9.5</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">typeclasses.objects</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, The Evennia developer community.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>